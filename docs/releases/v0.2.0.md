# v0.2.0 Release Notes

## 发布信息

- 版本：`v0.2.0`
- 日期：`2026-02-22`
- 基线版本：`v0.1.0`

## Added

- 工程化基线：`Makefile`、GitHub CI、`app/tests` 单元测试。
- 服务健康检查：`GET /api/healthz`、`GET /api/readyz`。
- 发布工程化脚本：`scripts/release.sh`、`scripts/rollback_release.sh`。
- 发布文档体系：`CHANGELOG.md`、`docs/RELEASE_PLAYBOOK_ZH.md`。

## Changed

- Web 控制台交互重构：
  - 飞书连接状态呼吸灯
  - 自动同步倒计时
  - 日志过滤与刷新状态反馈
  - “查看异常详情/清空最近异常”交互
- CLI 能力增强：
  - `config-validate`
  - `service-status`
  - `logs-tail --level/--module/--json`
  - `run-once --dry-run`
- 类型质量提升：`mypy app localfilesync` 全量通过。

## Fixed

- 修复“最近同步异常”显示歧义（`run_id` 被误读为异常条数）。
- 修复异常详情默认筛选为 `ERROR` 导致漏看 `WARNING sync` 问题。

## Deprecated

- 

## Removed

- 

## Security

- 

## 升级说明

- 数据库迁移：无强制迁移，沿用现有 `runtime/service.db`。
- 配置兼容性：兼容现有 `config.yaml`，新增字段有默认值。
- 需要人工操作：
  - 建议执行 `make check`
  - 建议验证 `healthz/readyz`
  - 如启用新发布流程，按 `docs/RELEASE_PLAYBOOK_ZH.md` 操作

## 回滚说明

- 目标回滚版本：`v0.1.0`（示例）
- 回滚命令：
  - `scripts/rollback_release.sh --target v0.1.0`
  - 可选重启：`scripts/rollback_release.sh --target v0.1.0 --restart-service`

## 验证记录

- `make check`：通过（ruff + mypy + pytest + compileall）
- `curl /api/healthz`：`ok=true`
- `curl /api/readyz`：`ok=true`

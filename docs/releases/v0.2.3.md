# v0.2.3 Release Notes

## 发布信息

- 版本：`v0.2.3`
- 日期：`2026-02-23`
- 基线版本：`v0.2.2`

## Added

- 调度状态新增 `initialized` 字段，前端可区分“初始化中”与“已关闭自动同步”。
- 事件回调误配置保护：启用回调但未配置 `event_verify_token` 时，接口返回 `503` 并给出明确错误码。
- 回归测试补充：
  - `app/tests/test_api_health.py`
  - `app/tests/test_event_callback.py`

## Changed

- UI 优化：
  - 首屏状态统一“获取中”语义，避免短暂显示“关闭/失败”。
  - 最近同步在执行中优先展示“执行中”。
  - 强化视觉层次、按钮反馈、面板切换动效与移动端展示。
- 调度器循环增强：单轮异常不再直接退出循环，改为记录失败并继续下一轮。
- `Makefile` 兼容根目录虚拟环境路径，`make check` 不再依赖系统 Python 开发工具。
- `FastAPI` 版本号改为从包元数据读取，减少版本漂移。
- 夜间自驱脚本优化目标时间为“下一个 08:00”，并补充事件回调配置巡检日志。

## Fixed

- 修复首屏自动同步状态闪现“关闭”的问题。
- 修复 `make check` 在当前工程布局下调用 `./venv/bin/python` 失败的问题。

## 升级说明

- 数据库迁移：无强制迁移。
- 配置兼容性：若开启 `sync.event_callback_enabled`，必须配置 `sync.event_verify_token`。
- 需要人工操作：升级后建议执行 `make check`，并确认 `/api/status/scheduler` 的 `initialized=true`。

## 回滚说明

- 目标回滚版本：`v0.2.2`
- 回滚命令：`scripts/rollback_release.sh --target v0.2.2 --restart-service`

## 验证记录

- `make check`：通过（32 passed）
- `curl /api/healthz`：`ok=true`
- `curl /api/readyz`：`ok=true`
